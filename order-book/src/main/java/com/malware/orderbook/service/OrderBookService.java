package com.malware.orderbook.service;

import com.malware.orderbook.dao.Orders;
import com.malware.orderbook.repository.OrderBookRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.Optional;

@Service
@RequiredArgsConstructor
public class OrderBookService {

    private final OrderBookRepository orderBookRepository;

    @Transactional
    public Orders addOrder(Orders order) {
        Optional<Orders> prevOrder = orderBookRepository.findByOrderId(order.getOrderId());
        return prevOrder.orElseGet(() -> orderBookRepository.save(order));
    }
}
